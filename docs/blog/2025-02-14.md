# February 14, 2025

## Recap

On the 12th, I was working my memory allocator. The problem I had was that my tests were not passing due to the free space numbers not adding up.
Tonight I went back and turns out the numbers my tests were expecting were wrong.
This is a huge win because it means adjusting my code was very quick and easy.

The reason the calculations were off was because:
1. The sizes requested did not match directly with the block sizes like when dealing with pages. This meant it could allocate more memory than was requested.
2. The sizes requested were padded with enough space to store the size of the allocation. This also meant it WILL allocate more memory than was requested.

This biggest miss in my tests is that while it was very easy to predict when a page allocation will fail when allocating a page at a time, when the sizes are random it becomes impossible.
This is because due to fragmentation it is possible that there is not enough memory for an allocation even though in aggregate there is.

All tests are now passing.

Wait... let me up the anty to 1000 allocation/deallocations just to make sure.

Yup, 10,000 allocator operations in 0.08 seconds. If I do the math that's 8 microseconds per operation.