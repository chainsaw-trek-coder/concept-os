# February 11, 2025

## Recap

Heyyyy.
So I've been away for a while. I'm glad I'm back at it. 
The biggest thing about restarting a project that's been put on pause is trying to reorient yourself to what you were doing.

I got to coding last night and was able to sort of reorient myself to what I was doing which was fleshing out the system for reading ELF files.
I've added a few more tests and feel I have an understanding of ELF binaries. I'm still not quite clear on relocation.

The reason why I really need to figure out relocation is because I made the decision to build the kernel binary as a relocatable binary.
This should in theory allow for me to load the kernel in high memory and still have performant code.

Tonight however I've taken a break from the ELF reader logic and decided to focus on memory management again. After all this needs to be fairly fleshed out,
if I'm going to load the ELF binary anywhere.

I've decided to adapt the "well" tested code for allocating pages so that it can more generically be used to allocate memory. To this end I've added a `block_size` parameter to my
initializer and a flag to track allocated block sizes.

In theory I should be able to reuse this allocator in a standard C/C++ application since I don't have a C library at my disposal. For a heap for example I would set the block size to the minimum of 28 bytes
(which is the size of a free block structure) and set the track_allocated_size flag to true. This should support your basic malloc and free mechanisms.

The code is in, I'm just too tired to test this new functionality.

I think instead I'm going to study how C++ exceptions work internally as well as how global constructors work.
I would like my kernel code to have additional C++ features that will enhance my development effort.

One more note. I've been putting a lot of thought into the layout of things.
Ideally there would be a set of free pages per CPU to avoid contention. The kernel needs it's own heap and stack.
So far coding without a heap has been interesting however it is getting tiresome and will become a problem as I start handling variable sized data such as the text region of an ELF binary.

But for now, I'm too tired. So I'm going to close Codespaces, do some reading and go to bed.